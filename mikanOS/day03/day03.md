# day03
## 3.1 QEMUモニタ
- QEMUモニタを使ったデバッグ方法を記載する。
- QEMUモニタは、QEMUの標準機能で、CPUの設定を表示したりメモリの中身を読み書きをすることができる。
- QEMUモニタはを使うには、QEMUが起動した後にrun_qemu.shを実行したターミナルに戻る。  
  （QEMUモニタをターミナルから使えるようにしてある。）
    ![Image 1](qemuMonitor1.png)
## 3.1.1 QEMUモニタを使ったレジスタ値の確認
- QEMUモニタで以下のコマンドを実行すると、CPUの各レジスタの現在の値が表示される。
  ```
  info registers
  ```
   ![Image 1](infoResisters.png)
## 3.1.2 QEMUモニタを使ったメモリダンプ方法
- メインメモリの中で指定したアドレス付近の値を表示する、メモリダンプの方法を記載する。
- メモリダンプを実施するにはxコマンドを使う。Xコマンドの書式は以下の通り。
  ```
  (qemu) x /fmt addr
  ```
  - /fmtに指定された書式にしたがってaddrを先頭とするメモリ領域の値を表示する。  
    /fmtは、/[個数][フォーマット][サイズ]と分解できる。
  - [個数]は、何個分表示するかを指定する。
  - [フォーマット]は、読み出した値をどのような形式で表示するかを以下の種類から選択できる。
    | オプション | 表示形式 | 
    | ------------- | -------- | 
    | x | 16進数表示 |
    | d | 10進数表示 |
    | i | 機械語命令を逆アセンブルして表示 |
  - [サイズ]は、何バイトを1単位として解釈するかを指定する。
  
    | オプション | 単位 | 
    | ------------- | -------- | 
    | b | 1バイト |
    | h | 2バイト |
    | w | 4バイト |
    | g | 8バイト |
- 0x067ae4c4から4バイトを16進数で表示する場合は、以下のようにコマンドを実行する。
  ```
  (qemu) x /4xb 0x067ae4c4
  00000000067ae4c4: 0xeb 0xfe 0x66 0x90
  ```
  - 上記はおそらく機械語命令であると思われる。
    試しに2命令分を逆アセンブルして表示してみる。
    ```
    (qemu)bx /2i 0x067ae4c4
    00000000067ae4c4:  jmp      0x67ae4c4
    00000000067ae4c6:  xchg     %ax,%ax
    ```
      - 「jmp 0x67ae4c4」は、0x67ae4c4にジャンプするという命令であるが、0x67ae4c4はその命令がある場所そのものであるので、結局は同じ場所をぐるぐると回ることになる。実はこのアセンブリ命令はwhile(1);をコンパイルしたものになる。
## 3.2 レジスタ
